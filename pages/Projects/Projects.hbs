{{#section 'head'}}
  <link rel=stylesheet href=/styles/Projects.css>
{{/section}}

<main id=main class=projects-page>

  <h1 class=page-title>Projects</h1>

  <p class=page-description>This page displays all the projects that you have permissions to view.</p>

  <ul class='bordered nav-list projects-list'>
    {{#each projects as |project|}}
      <li class=project>
        <header class=project__header>

          <a class='link project__name' href='/projects/{{ id }}'>{{ name }}</a>

          {{#if permissions.public }}
            <svg aria-hidden=true class=icon>
              <title>public</title>
              <use href=#globe>
            </svg>
            <span class=visually-hidden>public</span>
          {{else}}
            <svg aria-hidden=true class=icon>
              <title>private</title>
              <use href=#lock>
            svg>
            <span class=visually-hidden>private</span>
          {{/if}}

          {{#with permissions }}
            {{#if isOwner }}
              <svg aria-hidden=true class=icon>
                <title>owner</title>
                <use href=#shield-with-check>
              </svg>
              <span class=visually-hidden>owner</span>
            {{else if isEditor }}
              <svg aria-hidden=true class=icon>
                <title>editor</title>
                <use href=#edit>
              </svg>
              <span class=visually-hidden>editor</span>
            {{else if isViewer }}
              <svg aria-hidden=true class=icon>
                <title>viewer</title>
                <use href=#eye>
              </svg>
              <span class=visually-hidden>viewer</span>
            {{else if @root.user }}
              <svg aria-hidden=true class=icon>
                <title>public</title>
                <use href=#globe>
              </svg>
              <span class=visually-hidden>public</span>
            {{/if}}
          {{/with}}

          <span class=date-created>Created {{date dateCreated 'long' }}</span>

        </header>
        <details>
          <summary>
            <header class=project__description-header>
              <span class=project__description-title>Description</span>
              <span class=project__read-more>(click to expand)</span>
              <span class=project__read-less>(click to collapse)</span>
            </header>
            <span class=project__description-preview>{{{ readme.markdown }}}</span>
          </summary>
          <div class=md>{{{ readme.html }}}</div>
        </details>
      </li>
    {{/each}}
  </ul>

</main>
